!function e(t,i,n){function o(r,s){if(!i[r]){if(!t[r]){var c="function"==typeof require&&require;if(!s&&c)return c(r,!0);if(a)return a(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[r]={exports:{}};t[r][0].call(u.exports,function(e){var i=t[r][1][e];return o(i?i:e)},u,u.exports,e,t,i,n)}return i[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e,t,i){"use strict";var n=function(e,t){var i=this,n={bellowsEase:"cubic-in-out",theme:{backgroundEmpty:"#4A4A4A",backgroundFull:"#333333",bellowsEmpty:"#6F6F6F",bellowsFull:"#656565",centerEmpty:"#6D6D6D",centerFull:"#6F6F6F"}},o=this;o.elem=$(e),o.id=e,o.config=_.assign({},n,t);var a=function(){o.height=o.elem.height(),o.width=o.elem.width(),o.metric=o.elem.height()<o.elem.width()?o.elem.height():o.elem.width()};return window.addEventListener("resize",function(){a()}),o.elem.click(function(){return i.config.broadcast("setUiState","full")}),a(),o.init(),o};n.prototype.onSetTheme=function(e){return"undefined"!=typeof e&&(this.config=_.assign({},this.config,{theme:e})),this},n.prototype.loop=function(){var e=this,t=420,i=5700,n=0,o=function(){3==++n&&e.loop()};return e.elements.background.transition().delay(t).duration(i).attr("fill",e.config.theme.backgroundFull).each("end",function(){e.elements.background.transition().duration(i).attr("fill",e.config.theme.backgroundEmpty).each("end",function(){o()})}),e.elements.bellows.transition().delay(t).duration(i).ease(e.config.bellowsEase).attr("fill",e.config.theme.bellowsFull).attr("rx",.55*e.width).attr("ry",.55*e.height).each("end",function(){e.elements.bellows.transition().ease(e.config.bellowsEase).duration(i).attr("fill",e.config.theme.bellowsEmpty).attr("rx",.29*e.width).attr("ry",.23*e.height).each("end",function(){o()})}),e.elements.center.transition().delay(t).duration(i).attr("fill",e.config.theme.centerFull).attr("rx",.24*e.width).attr("ry",.18*e.height).each("end",function(){e.elements.center.transition().duration(i).attr("fill",e.config.theme.centerEmpty).attr("rx",.26*e.width).attr("ry",.2*e.height).each("end",function(){o()})}),e},n.prototype.init=function(){var e=this;return d3.select(e.id).selectAll("*").remove(),e.svg={},e.elements={},e.svg=d3.select(e.id).append("svg").attr("width","100%").attr("height","100%").append("g"),e.elements.background=e.svg.append("rect").attr("id","#background").attr("width","100%").attr("height","100%").attr("fill",e.config.theme.backgroundEmpty),e.elements.bellows=e.svg.append("ellipse").attr("id","#bellows").attr("rx",.29*e.width).attr("ry",.23*e.height).attr("fill",e.config.theme.bellowsEmpty).attr("cx","50%").attr("cy","50%"),e.elements.center=e.svg.append("ellipse").attr("id","#center").attr("rx",.26*e.width).attr("ry",.2*e.height).attr("fill",e.config.theme.centerEmpty).attr("cx","50%").attr("cy","50%"),e.loop(),this},t.exports=n},{}],2:[function(e,t,i){"use strict";var n={bitly:{url:"https://api-ssl.bitly.com/v3/shorten?callback=?",apikey:"",login:""},ga:{ua:""},fb:{appid:""},breatheQueryStringParamName:"breathe",cookieName:"BreatheThemes",cookieValidDays:900,defaultThemes:[{backgroundEmpty:"#aeaeae",backgroundFull:"#d41919",bellowsEmpty:"#c02626",bellowsFull:"#ffe7e7",centerEmpty:"#702929",centerFull:"#ffeaea"},{backgroundEmpty:"#a59b9b",backgroundFull:"#d41919",bellowsEmpty:"#c02626",bellowsFull:"#f16969",centerEmpty:"#843131",centerFull:"#f56565"}],defaultUiState:"full"};t.exports=n},{}],3:[function(e,t,i){"use strict";var n=e("./Widget"),o=function(e){return n.call(this,e),this.init(),this};o.prototype=Object.create(n.prototype),o.prototype.init=function(){var e=$("<div>",{"class":"cookie-info",click:function(){$("#cookie-info").remove()}}),t=$('<span class="info-wrapper"></span>');t.append('<span class="text">Sivusto käyttää evästeitä väriteemojen tallentamiseen, jatkamalla hyväksyt evästeiden käytön.</span>'),t.append("<br>"),t.append('<span class="confirm">OK</span>'),e.append(t),this.elem.append(e)},t.exports=o},{"./Widget":10}],4:[function(e,t,i){"use strict";var n=e("./Theme"),o=e("./Widget"),a=function(e,t){o.call(this,e);var i={theme:{backgroundEmpty:"#4A4A4A",backgroundFull:"#333333",bellowsEmpty:"#6F6F6F",bellowsFull:"#656565",centerEmpty:"#6D6D6D",centerFull:"#6F6F6F"}};return this.config=_.assign({},i,t),this.init(),this};a.prototype=Object.create(o.prototype),a.prototype.showStatus=function(){this.statusSuccess.addClass("show"),setTimeout(function(){this.statusSuccess.removeClass("show")}.bind(this),1500)},a.prototype.onSetTheme=function(e){return this.config.theme=e,this.init(),this},a.prototype.init=function(){var e=this,t=this;this.elem.empty(),this.colorPickers=[];var i=function(i){var n=$("<div>",{"class":"color-picker-container",height:100/Object.keys(t.config.theme).length*.93+"%"}),o=$('<span><i class="fa fa-ellipsis-h" aria-hidden="true"></i></span>').addClass("color-picker-icon"),a={elem:$("<div>",{id:"color-picker-"+i,"class":"color-picker",height:"100%"}),id:"#color-picker-"+i,color:t.config.theme[i]||"grey"};e.colorPickers.push(a),a.elem.append(o),n.append(a.elem),e.elem.append(n),a.elem.css("background-color",a.color);var r=function(e){e=e.toHexString(),a.elem.css("background-color",e),t.config.theme[i]=e,t.config.broadcast("setTheme",t.config.theme)};a.elem.spectrum({color:a.color,showInitial:!0,change:_.throttle(r,50),move:_.throttle(r,50)})};for(var o in n.getOnlyValidKeys(t.config.theme))i(o);var a=$("<div></div>",{"class":"widget-controls"}),r=$("<span>",{"class":"control",click:function(){t.config.broadcast("saveTheme",t.config.theme),e.showStatus()}}).append($('<i class="fa fa-floppy-o" aria-hidden="true"></i>',{id:"control-save-theme"}));return this.statusSuccess=$("<span>",{id:"status-success","class":"status status-success"}).append($('<i class="fa fa-check-circle" aria-hidden="true"></i>')),this.elem.append(a.append(r,this.statusSuccess)),t},t.exports=a},{"./Theme":7,"./Widget":10}],5:[function(e,t,i){"use strict";var n=(e("./Config"),e("./Theme")),o=(e("./Tools"),e("./Vendor")),a=function(e){return this.available=!0,this.config=e,this.items=[],this.init(),this};a.prototype.onSetUiState=function(e){var t=this;if(this.available){this.available=!1;var i=this.items.filter(function(e){return"nav-item"===e.type});i=i.map(function(t){return t.name===e?t.elem.addClass("active"):t.elem.removeClass("active"),t.name}),i.indexOf(e)>=0&&t.config.container.removeClass(i.join(" ")).addClass(e),setTimeout(function(){t.available=!0},500)}return this},a.prototype.init=function(){var e=this;return this.config.navbars.forEach(function(t){var i=$(t.container);t.items.forEach(function(t){var a=void 0;"undefined"!=typeof t.imgSrc?a=$('<img src="'+t.imgSrc+'">'):"undefined"!=typeof t.fa&&(a=$('<i class="fa '+t.fa+'" aria-hidden="true"></i>'));var r={"class":"nav-item"};"undefined"!=typeof t.id&&(r.id=t.id);var s={elem:$("<div>",r).addClass(t.type).attr("id",t.name).append(a),name:t.name,type:t.type};"social-item"===t.type&&"undefined"!=typeof t.name&&"undefined"!=typeof t.action?s.elem.click(t.action,function(i){o.ga("social",t.name),e.config.getState("theme",function(e){i.data(JSON.stringify(n.getOnlyValidKeys(e)))})}):"nav-item"===t.type&&"undefined"!=typeof t.name?s.elem.click(t.name,function(t){e.config.broadcast("setUiState",t.data)}):"undefined"!=typeof t.href&&s.elem.click(t.href,function(t){e.config.broadcast("openPage",t.data),window.open(t.data)}),i.append(s.elem),e.items.push(s)})}),this},t.exports=a},{"./Config":2,"./Theme":7,"./Tools":12,"./Vendor":9}],6:[function(e,t,i){"use strict";var n=e("./Config"),o=e("./Theme"),a=e("./Tools"),r=function(e){return this.container=e.container,this.theme=e.theme,this.uiState=n.defaultUiState,this.init()};r.prototype.getActiveTheme=function(){return this.theme},r.prototype.onSetUiState=function(e){return this.uiState=e,this.uiState},r.prototype.onSetTheme=function(e){return this.theme=o.validate(e)?o.getOnlyValidKeys(e):this.theme,this.theme},r.prototype.init=function(){a.isMobile()&&this.container.addClass("mobile");var e=a.getParameterByName(n.breatheQueryStringParamName);if(o.validate(e))this.theme=e;else{var t=null;try{e&&(t=JSON.parse(e))}catch(i){console.error("JSON.parse(themeJson) err, themeJson:"),console.error(e)}this.theme=o.validate(t)?t:n.defaultThemes[0]}return this},t.exports=r},{"./Config":2,"./Theme":7,"./Tools":12}],7:[function(e,t,i){"use strict";var n=e("./Tools"),o=function(){};o.getValidKeys=function(){return["backgroundEmpty","backgroundFull","bellowsEmpty","bellowsFull","centerEmpty","centerFull"]},o.getOnlyValidKeys=function(e){var t=(Object.keys(e),{});return o.getValidKeys().forEach(function(i){t[i]=e[i]}),t},o.validate=function(e){return e?o.getValidKeys().every(function(t){return"undefined"!=typeof e[t]&&n.validateHex(e[t])}):!1},o.getRandomColor=function(e){var t=Math.floor(5*Math.random());return e[o.getValidKeys()[t]]},t.exports=o},{"./Tools":12}],8:[function(e,t,i){"use strict";var n=e("./Config"),o=e("./Theme"),a=e("./Tools"),r=(e("./Vendor"),e("./Widget")),s=function(e,t){r.call(this,e);var i={themes:[]};return this.themes=[],this.cookie={},this.themesInvalid=!1,this.config=_.assign({},i,t),this.init(),this};s.prototype=Object.create(r.prototype),s.parse=function(e){var t=null;try{t=JSON.parse(e)}catch(i){console.log("json parse err")}return t},s.prototype.onSetTheme=function(e){return this.themes.forEach(function(t){s.identical(t,e)?t.elem.css("background-color",o.getRandomColor(t)).addClass("active"):t.elem.css("background-color","#fff").removeClass("active")}),this},s.prototype.read=function(){var e=this,t=this;return this.cookie=s.parse(decodeURIComponent(a.getCookie(n.cookieName)))||[],this.themes=s.validate(this.cookie),0===this.themes.length?this.config.themes.forEach(function(t){return e.themes.push(_.assign({},t))}):setTimeout(function(){t.config.broadcast("setTheme",Object.assign({},t.themes[0]))},0),this},s.prototype.save=function(){var e=this;return e.themes=s.validate(e.themes),e.themes=e.themes.slice(0,8),a.setCookie(n.cookieName,JSON.stringify(e.themes)),this},s.validate=function(e){return e.filter(function(e){return o.validate(e)})},s.identical=function(e,t){return o.getValidKeys().every(function(i){return e[i]===t[i]})},s.prototype.onSaveTheme=function(e){if(o.validate(e)){e=o.getOnlyValidKeys(e);var t=this.themes.some(function(t){return s.identical(t,e)});t||(this.themes.unshift(_.assign({},e)),this.save().paint().onSetTheme(e))}return this},s.prototype.removeTheme=function(e){return this.config.broadcast("removeTheme"),this.themes=this.themes.filter(function(t){return!o.getValidKeys().every(function(i){return e[i]===t[i]})}),this.save().paint(),this},s.prototype.paint=function(){var e=this,t=this;this.elem.empty();var i=function(e){var t="theme-item";return"undefined"!=typeof e.name&&(t+=" "+e.name),t};return this.themes.map(function(n){var r=a.getSlug();n.elem=$("<div>",{id:"theme-item-"+r,"class":i(n),click:function(){t.config.broadcast("setTheme",Object.assign({},n))}});var s=o.getValidKeys();s.forEach(function(e){n.elem.append($("<div>",{"class":"color-item"}).css("background-color",n[e]))});var c=$('<span><i class="fa fa-times-circle" aria-hidden="true"></i></span>',{id:"theme-remove-"+r}).addClass("control").click(function(t){t.preventDefault(),e.removeTheme(n)});return n.elem.append(c),e.elem.append(n.elem),n}),this.elem.append($("<div>max 8 themes</div>").addClass("info")),this.elem.append($('<div class="credits"><a target="_blank" href="https://aumbadgah.com">aumbadgah</a></div>')),this},s.prototype.init=function(){this.read().paint()},t.exports=s},{"./Config":2,"./Theme":7,"./Tools":12,"./Vendor":9,"./Widget":10}],9:[function(e,t,i){"use strict";var n=e("./Config"),o=e("./Tools"),a={init:function(){o.isLocal()||(n.ga.ua.length>0&&(!function(e,t,i,n,o,a,r){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,a=t.createElement(i),r=t.getElementsByTagName(i)[0],a.async=1,a.src=n,r.parentNode.insertBefore(a,r)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create",n.ga.ua,"auto"),ga("send","pageview")),n.fb.appid.length>0&&(window.fbAsyncInit=function(){FB.init({appId:n.fb.appid,xfbml:!0,version:"v2.6"})},function(e,t,i){var n,o=e.getElementsByTagName(t)[0];e.getElementById(i)||(n=e.createElement(t),n.id=i,n.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(n,o))}(document,"script","facebook-jssdk")))},ga:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=arguments.length<=1||void 0===arguments[1]?"noValue":arguments[1],i=arguments.length<=2||void 0===arguments[2]?"system":arguments[2];!o.isLocal()&&n.ga.ua.length>0&&ga("send","event",i,e,t)}),getTinyUrl:function(e,t){!o.isLocal()&&n.bitly.url.length>0&&n.bitly.apikey.length>0&&n.bitly.login.length>0&&$.getJSON(n.bitly.url,{format:"json",apiKey:n.bitly.apikey,login:n.bitly.login,longUrl:e},function(e){t(e.data.url)})}};t.exports=a},{"./Config":2,"./Tools":12}],10:[function(e,t,i){"use strict";var n=function(e){this.elem=$(e),this.id=e,this.setup()};n.prototype.setup=function(){var e=this,t=function(){e.height=e.elem.height(),e.width=e.elem.width()};return window.addEventListener("resize",function(){t()}),t(),e},t.exports=n},{}],11:[function(e,t,i){"use strict";!function(t,i){var n=e("./Breathe"),o=e("./Config"),a=e("./CookieInfo"),r=e("./MultiColorPicker"),s=e("./Navigation"),c=e("./State"),l=e("./ThemeList"),u=e("./Tools"),d=e("./Vendor"),h='<div id="container" class="container"><div class="widgets"><div class="widget content-widget" id="cookie-info"></div><div class="widget content-widget" id="breathe"></div><div class="widget control-widget" id="multi-color-picker"></div><div class="widget control-widget" id="theme-list"></div></div><div class="nav-bar" id="bottom-nav"></div><div class="nav-bar" id="top-nav"></div></div>',m={container:"#bottom-nav",items:[{name:"list",fa:"fa-list-ul",type:"nav-item"},{name:"colorpicker",fa:"fa-paint-brush",type:"nav-item"},{name:"full",id:"full",fa:"fa-desktop",type:"nav-item"}],setActive:!0},f={container:"#top-nav",items:[{name:"logo",href:"http://pilatesoulu.com",imgSrc:"img/pilates-oulu-icon.png",type:"logo"},{name:"facebook",fa:"fa-facebook-official",type:"social-item",action:function(e){var t=window.location.origin+window.location.pathname+"?"+o.breatheQueryStringParamName+"="+e;u.isLocal()?(console.log("Vendor.getTinyUrl(uri"),console.log(t)):d.getTinyUrl(t,function(e){FB.ui({method:"share",href:e},function(e){})})}},{name:"whatsapp",fa:"fa-whatsapp",type:"social-item",action:function(e){var t=window.location.origin+window.location.pathname+"?"+o.breatheQueryStringParamName+"="+e;u.isLocal()?(console.log("Vendor.getTinyUrl(uri"),console.log(t)):d.getTinyUrl(t,function(e){window.open("whatsapp://send?text="+e)})}}]},p={},g=[],v=function(e,t){d.ga(e,t);var i="on"+e.charAt(0).toUpperCase()+e.slice(1);"undefined"!=typeof p[i]&&p[i](t),g.filter(function(e){return"undefined"!=typeof e[i]}).forEach(function(e){return e[i](t)})},y=function(e,t){d.ga("getState",e),t(p[e])},b=function(){d.init(),i("body").html(h),p=new c({container:i("#container")});var e=p.getActiveTheme();g=[new a("#cookie-info"),new r("#multi-color-picker",{theme:e,broadcast:v}),new n("#breathe",{theme:e,broadcast:v}),new l("#theme-list",{theme:e,themes:o.defaultThemes,broadcast:v}),new s({navbars:[m,f],getState:y,broadcast:v,container:p.container})],v("setUiState",o.defaultUiState)};b()}(_,jQuery)},{"./Breathe":1,"./Config":2,"./CookieInfo":3,"./MultiColorPicker":4,"./Navigation":5,"./State":6,"./ThemeList":8,"./Tools":12,"./Vendor":9}],12:[function(e,t,i){"use strict";var n=e("./Config"),o={isLocal:function(){return window.location.href.indexOf("localhost")>=0},setCookie:function(e,t){var i=n.cookieValidDays;if(i){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3);var a="; expires="+o.toGMTString()}else var a="";document.cookie=e+"="+t+a+"; path=/"},getCookie:function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null},getSlug:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;5>i;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=i.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},validateHex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)}};t.exports=o},{"./Config":2}]},{},[11]);